{% extends 'base.html.twig' %}

{% block title %}Order{% endblock %}

{% block body %}
	<div class="card shadow w-75 m-auto p-4 border-0 mt-4">
		<div class="col">
			<div class="d-flex align-items-center justify-content-start gap-3 p-2">
				<h4><b>Orders</b></h4>
			</div>
			{% if orders|length == 0 %}
				<div class="d-flex justify-content-center align-items-center">
					<span class="fs-4">You don't have any orders </span>
				</div>
			{% else %}
				{% for order in orders %}
					<div class="row border-top m-3 pb-3 pt-5">
						<div class="m-auto row align-items-center">
							<div class="col d-flex justify-content-center">
								<span class="text-center">#ORDER-{{ order.id }}</span>
							</div>
							<div class="col d-flex justify-content-center">
								<span class="text-center"> {{ order.createdAt|date('d-m-Y H-i-s') }} </span>
							</div>
							<div class="col d-flex justify-content-center">
								<span class="text-center text-nowrap">
									{{ order.address.line1 }}, {{ order.address.zip }} {{ order.address.city }}
								</span>
							</div>
							<div class="col d-flex justify-content-center">
								<span class="badge py-1 text-white text-bg-{{ constant('App\\Entity\\ORDER::BADGE_COLOR')[order.orderStatus] }}">
									{{ order.getOrderStatusName(order.orderStatus) }}
								</span>
							</div>
							{% if order.orderStatus ==  constant('App\\Entity\\ORDER::STATUS_UNPAID_ORDER') %}
								<div class="col d-flex align-items-center justify-content-center">
									<a href="{{ path('app_create_session_stripe', {'id': order.id}) }}"
									   class="btn btn-outline-success">
										<span class="me-2">paid order</span>
										<i class="fa-solid fa-cart-shopping fa-lg"></i>
									</a>
								</div>
							{% else %}
								<div class="col d-flex align-items-center justify-content-center">
									<a href="{{ path('app_order_detail', {'id': order.id }) }}"
									   class="btn btn-outline-dark">
										<i class="fa-solid fa-magnifying-glass fa-lg"></i>
									</a>
								</div>
							{% endif %}
						</div>
					</div>
				{% endfor %}
			{% endif %}
			<div class="d-flex justify-content-between align-items-center border-top p-3 mt-4">
				<a href="{{ path('app_home') }}" class="btn btn-secondary mt-2">
					<i class="fa-solid fa-arrow-left fa-beat fa-lg me-2"></i>
					<span>back to shop</span>
				</a>
			</div>
		</div>
	</div>
{% endblock %}
